<div class="container">
	<h4>View Assessment Results</h4>
  <br/>
  <div class="card">
    <div class="card-body">
  	<%= form_for :search, url: results_path, method: :get, html: {class: "form-inline"} do |f| %>
      <div class="form-group">
        <%= f.label "Course:", class: "mx-sm-3" %><br />
        <%= collection_select(
          :search, :course_id, @courses, :id, :full_course_name, {:prompt => true, :selected=> @params.present? ? @params[:course_id] : ""})%>
      </div>
      <div class="form-group">
        <%= f.label "Unit assessed:", class: "mx-sm-3" %><br />
        <%= f.select :unit_id, [], :selected=> @params.present? ?  @params[:unit_id] : "", class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label "For semester starting:", class: "mx-sm-3"%><br />
        <%= collection_select(:search, :assessment_id, @assessments, :id, :full_semester_name, {:selected=> @params.present? ? @params[:assessment_id] : ""}) %>
      </div>
      <%= f.submit "Search", class: "btn btn-primary mx-sm-3"%>
		<% end %>
  </div>
  </div>
  <br/>
  <table class="table table-bordered table-responsive-sm table-sm">
      <thead class="thead-light">
        <th>Admission No.</th>
        <th>Full Name</th>
        <th>Attendance</th>
        <th>Assignments</th>
        <th>Practicals</th>
        <th>CATs</th>
        <th>Final Exam</th>
        <th>Final Mark</th>
        <th>Final Grade</th>
      </thead>
      <tbody>
        <% if @results.empty? %>
          <span style="color: red">
            No Results Found.
          </span>
        <%else%>
          <% @results.each do |result| %>
            <tr>
              <td><%= result.student.admission_no%></td>
              <td><%= result.student.full_name%></td>
              <td><%= result.attendance %></td>
              <td><%= result.assignments %></td>
              <td><%= result.practicals %></td>
              <td><%= result.cats  %></td>
              <td><%= result.final_exam %></td>    
              <td><b><%= result.final_mark %></b></td>  
              <td><b><%= result.final_grade %></b></td>  
            </tr>
          <%end%>
        <%end%>
      </tbody>
    </table>
</div>